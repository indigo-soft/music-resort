#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';
if (!function_exists('__')) {
    require_once __DIR__ . '/../src/Helpers/helpers.php';
}

use MusicResort\Command\CleanMp3Command;
use MusicResort\Command\DeduplicateMp3Command;
use MusicResort\Command\FixExtensionsCommand;
use MusicResort\Command\ResortMp3Command;
use MusicResort\Service\ConfigService;
use MusicResort\Service\LocalizationService;
use Symfony\Component\Console\Application;

// Initialize configuration and localization
ConfigService::init(dirname(__DIR__));
LocalizationService::setLocale(ConfigService::get('app.default_lang'));

$application = new Application('Music Resort Tool', '1.0.0');
$application->add(new ResortMp3Command());
$application->add(new DeduplicateMp3Command());
$application->add(new FixExtensionsCommand());
$application->add(new CleanMp3Command());
try {
    $application->run();
} catch (Exception $e) {
    echo $e->getMessage();
}
